# Implementation Plan

- [x] 1. 프로젝트 구조 및 기본 설정 구성





  - `backend/tests/terminal_tester/` 디렉토리 구조 생성
  - 기본 설정 파일 및 JWT 생성 유틸리티 구현
  - _Requirements: 1.1, 1.2, 1.3_

- [x] 2. 서버 관리 시스템 구현





  - Flask 백엔드 서버 자동 시작/종료 기능 구현
  - 서버 상태 모니터링 및 헬스체크 기능 구현
  - _Requirements: 1.1, 1.3, 8.1, 8.2_

- [x] 3. API 통신 클라이언트 구현





  - HTTP 요청/응답 처리 및 JWT 토큰 관리 구현
  - 4개 학습 API 엔드포인트 호출 메서드 구현
  - API 요청/응답 로깅 시스템 구현
  - _Requirements: 2.1, 2.2, 3.1, 3.2, 4.1, 4.2, 5.1, 5.2, 6.1, 6.2_

- [x] 4. 명령어 파싱 시스템 구현









  - 특수 명령어(/state, /quit, /proceed, /retry) 파싱 구현
  - 사용자 입력에 따른 적절한 API 엔드포인트 결정 로직 구현
  - _Requirements: 3.3, 5.3, 5.4, 5.5, 8.3_

- [x] 5. 상태 모니터링 시스템 구현





  - TutorState 전체 내용 출력 기능 구현
  - 상태 변화 감지 및 하이라이트 표시 기능 구현
  - 핵심 필드(session_progress_stage, current_agent, ui_mode) 실시간 표시 구현
  - _Requirements: 7.1, 7.2, 7.3, 7.4, 7.5_

- [x] 6. 메인 터미널 테스터 구현








  - 대화형 사용자 인터페이스 구현
  - 챕터/섹션 입력 처리 및 학습 세션 시작 구현
  - AI 응답 포맷팅 및 출력 시스템 구현
  - _Requirements: 2.3, 2.4, 2.5, 3.4, 3.5, 4.3, 4.4, 4.5_

- [x] 6.1 JWT 토큰 인증 문제 해결





  - 백엔드 JWT 토큰 검증 로직 디버깅 및 수정
  - 토큰 생성 시 사용하는 SECRET_KEY와 백엔드 검증 시 사용하는 SECRET_KEY 일치 확인
  - JWT 토큰 헤더 형식 및 인코딩 방식 검증
  - 백엔드 인증 미들웨어 또는 데코레이터 함수 점검 및 수정
  - 토큰 만료 시간 및 페이로드 구조 확인
  - _Requirements: 3.1, 3.2, 6.1, 6.2_

- [x] 7. 안전한 종료 및 오류 처리 구현





  - Ctrl+C 및 특수 명령어를 통한 안전한 종료 처리 구현
  - 서버 프로세스 정리 및 리소스 해제 구현
  - 백엔드 오류 메시지 처리 및 사용자 친화적 표시 구현
  - _Requirements: 6.3, 6.4, 6.5, 8.1, 8.2, 8.4, 8.5_

- [x] 8. 통합 테스트 및 사용법 문서 작성





  - 전체 학습 플로우 통합 테스트 구현
  - README.md 사용법 가이드 작성
  - 메인 실행 파일 및 진입점 구현
  - _Requirements: 1.4, 1.5, 2.1, 2.2, 2.3, 2.4, 2.5_
  
  - [x] 9. 챕터 1 섹션 1→2 자동화 시나리오 테스트 구현





  - 챕터/섹션 입력 시 "1, 1" 자동 응답 기능 구현
  - 이론 내용 표시 후 "next" 자동 입력 처리 구현
  - 퀴즈 내용 표시 후 "1" 자동 입력 처리 구현
  - 피드백 표시 후 "/proceed" 자동 입력 처리 구현
  - 챕터 1 섹션 2로 정상 진행 확인 및 검증 로직 구현
  - 전체 시나리오 실행 결과 리포트 생성 기능 구현
  - _Requirements: 2.1, 2.2, 2.3, 2.4, 2.5, 3.1, 3.2, 4.1, 4.2, 5.1, 5.2, 6.1, 6.2_

- [ ] 10. 학습 세션 API 문제 해결 및 수정
  - [ ] 10.1 퀴즈 답변 처리 로직 수정




    - 퀴즈 답변 제출 후 피드백 단계로 정상 진행되지 않는 문제 해결
    - 답변 제출 시 세션 상태가 "quiz_completed"로 변경되도록 수정
    - UI 모드가 "feedback"으로 올바르게 전환되도록 수정
    - 연속으로 새로운 퀴즈가 생성되는 문제 해결
    - _Requirements: 퀴즈 답변 처리 및 세션 진행 정상화_

  - [ ] 10.2 State API 엔드포인트 구현
    - `/api/v1/learning/session/state` GET 엔드포인트 구현
    - 현재 TutorState 정보를 JSON 형태로 반환하는 기능 구현
    - JWT 토큰 인증 처리 및 적절한 HTTP 상태 코드 반환
    - 404 오류 해결 및 정상적인 상태 조회 기능 구현
    - _Requirements: 세션 상태 조회 API 구현_

  - [ ] 10.3 데이터 타입 오류 수정
    - `'str' object has no attribute 'get'` 오류 원인 분석 및 수정
    - JSON 직렬화/역직렬화 과정에서 타입 변환 오류 해결
    - API 응답 생성 시 문자열과 딕셔너리 타입 올바른 처리
    - 세션 데이터 처리 시 타입 안전성 확보
    - _Requirements: 백엔드 타입 오류 해결_

  - [ ] 10.4 학습 세션 플로우 검증 및 수정
    - 이론 → 퀴즈 → 피드백 → 다음 섹션 전체 플로우 검증
    - 각 단계별 세션 상태 업데이트 로직 점검 및 수정
    - `/proceed` 명령어 처리 로직 개선
    - 단계별 전환 시 발생하는 오류 해결
    - _Requirements: 전체 학습 플로우 정상화_

  - [ ] 10.5 API 응답 형식 표준화
    - 모든 API 엔드포인트의 응답 형식 통일
    - 성공/실패 응답 구조 표준화
    - 오류 메시지 형식 일관성 확보
    - 클라이언트에서 처리하기 쉬운 응답 구조로 개선
    - _Requirements: API 응답 형식 표준화_